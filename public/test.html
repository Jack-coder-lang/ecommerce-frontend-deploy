<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .card {
      background: white;
      color: #333;
      padding: 30px;
      border-radius: 10px;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    h1 { color: #667eea; }
    .success { color: green; font-weight: bold; }
    .error { color: red; font-weight: bold; }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 5px;
    }
    button:hover { background: #5568d3; }
    #result { margin-top: 20px; padding: 15px; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üîç Test de D√©ploiement</h1>
    <p>Si vous voyez cette page, le serveur fonctionne !</p>

    <div>
      <button onclick="testJS()">Test JavaScript</button>
      <button onclick="testAPI()">Test API</button>
      <button onclick="testAssets()">Test Assets</button>
    </div>

    <div id="result"></div>
  </div>

  <script>
    console.log('‚úÖ Test page charg√©e - JavaScript fonctionne !');

    function testJS() {
      const result = document.getElementById('result');
      result.innerHTML = '<div class="success">‚úÖ JavaScript fonctionne parfaitement !</div>';
      result.style.background = '#d4edda';
    }

    async function testAPI() {
      const result = document.getElementById('result');
      result.innerHTML = '<div>‚è≥ Test de l\'API en cours...</div>';

      try {
        const response = await fetch('https://ecommerce-backend-q0r2.onrender.com/api/products');
        if (response.ok) {
          const data = await response.json();
          result.innerHTML = `<div class="success">‚úÖ API accessible ! ${data.products?.length || 0} produits trouv√©s</div>`;
          result.style.background = '#d4edda';
        } else {
          result.innerHTML = `<div class="error">‚ùå API retourne ${response.status}</div>`;
          result.style.background = '#f8d7da';
        }
      } catch (error) {
        result.innerHTML = `<div class="error">‚ùå Erreur API : ${error.message}</div>`;
        result.style.background = '#f8d7da';
      }
    }

    async function testAssets() {
      const result = document.getElementById('result');
      const tests = [
        '/vite.svg',
        '/icons/pwa-192x192.png',
        '/assets/index-BALXqqE9.js'
      ];

      result.innerHTML = '<div>‚è≥ Test des fichiers...</div>';

      let html = '<div><strong>R√©sultats :</strong><br>';
      for (const asset of tests) {
        try {
          const response = await fetch(asset);
          if (response.ok) {
            html += `‚úÖ ${asset}<br>`;
          } else {
            html += `‚ùå ${asset} (${response.status})<br>`;
          }
        } catch (error) {
          html += `‚ùå ${asset} (erreur)<br>`;
        }
      }
      html += '</div>';
      result.innerHTML = html;
      result.style.background = '#e7f3ff';
    }
  </script>
</body>
</html>
